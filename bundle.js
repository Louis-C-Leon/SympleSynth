!function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);var n={C1:-45,Cs1:-44,D1:-43,Ds1:-42,E1:-41,F1:-40,Fs1:-39,G1:-38,Gs1:-37,A1:-36,As1:-35,B1:-34,C2:-33,Cs2:-32,D2:-31,Ds2:-30,E2:-29,F2:-28,Fs2:-27,G2:-26,Gs2:-25,A2:-24,As2:-23,B2:-22,C3:-21,Cs3:-20,D3:-19,Ds3:-18,E3:-17,F3:-16,Fs3:-15,G3:-14,Gs3:-13,A3:-12,As3:-11,B3:-10,C4:-9,Cs4:-8,D4:-7,Ds4:-6,E4:-5,F4:-4,Fs4:-3,G4:-2,Gs4:-1,A4:0,As4:1,B4:2,C5:3,Cs5:4,D5:5,Ds5:6,E5:7,F5:8,Fs5:9,G5:10,Gs5:11,A5:12,As5:13,B5:14,C6:15,Cs6:16,D6:17,Ds6:18,E6:19,F6:20,Fs6:21,G6:22,Gs6:23,A6:24,As6:25,B6:26,C7:27,Cs7:28,D7:29,Ds7:30,E7:31,F7:32,Fs7:33,G7:34,Gs7:35,A7:36,As7:37,B7:38,C8:39,Cs8:40};var i=class{constructor(e){this.type=e.type,this.state="stop",this.context=e.context,this.interval=0,this.frequency=440,this.semitone=Math.pow(2,1/12),this.node=new OscillatorNode(this.context,{type:this.type}),this.volumeNode=this.context.createGain(),this.node.connect(this.volumeNode),this.endpoint=this.volumeNode,this.node.start()}setInterval(e){this.interval=e,this.setFrequency(this.frequency)}setFrequency(e){this.frequency=e;let t=e*Math.pow(this.semitone,this.interval);this.node.frequency.setValueAtTime(t,this.context.currentTime)}setWave(e){this.node.type=e}connect(e){this.endpoint.connect(e),this.endpoint=e}};var o=class{constructor(e,t){this.compressor=e.createDynamicsCompressor(),this.level1=e.createGain(),this.level2=e.createGain(),this.level3=e.createGain(),this.ampOut=new GainNode(e,{gain:0}),t[0].connect(this.level1),t[1].connect(this.level2),t[2].connect(this.level3),this.level1.connect(this.compressor),this.level2.connect(this.compressor),this.level3.connect(this.compressor),this.out1=e.createGain({gain:.5}),this.out2=e.createGain({gain:.5}),this.compressor.connect(this.ampOut),this.ampOut.connect(this.out1),this.ampOut.connect(this.out2)}setLevels(e){void 0!==e.level1&&(this.level1.gain.value=e.level1),void 0!==e.level2&&(this.level2.gain.value=e.level2),void 0!==e.level3&&(this.level3.gain.value=e.level3)}setOutput(e){this.out1.gain.value=e>1?1:e,this.out2Level=1-this.out1Level}connect(e){this.out1.connect(e.filter1),this.out1.connect(e.filter2),this.out2.connect(e.dryOut)}};var r=class{constructor(e){this.context=e,this.filter1=new BiquadFilterNode(e,{frequency:400}),this.filter2=new BiquadFilterNode(e,{frequency:400}),this.base1=400,this.base=400,this.filterBank=[this.filter1,this.filter2],this.wetOut=new GainNode(e,{gain:.5}),this.dryOut=new GainNode(e,{gain:0}),this.series=new GainNode(e,{gain:0}),this.parallel=new GainNode(e,{gain:.5}),this.filter1.connect(this.parallel),this.parallel.connect(this.wetOut),this.filter2.connect(this.wetOut),this.filter1.connect(this.series),this.series.connect(this.filter2)}setFrequency(e,t){this.filterBank[e].frequency.value=t}setQ(e,t){this.filterBank[e].Q.value=t}setType(e,t){this.filterBank[e].type=t}setEnvelope(e){this.envAmt=e>1?1:e<0?0:e}setLevels(e){void 0!==e.series&&(e.series>.5?this.series.gain.value=.5:this.series.gain.value=e.series,this.parallel.gain.value=.5-this.series.gain.value),void 0!==e.wet&&(e.wet>.5?this.wetOut.gain.value=.5:this.wetOut.gain.value=e.wet,this.dryOut.gain.value=.5-this.wetOut.gain.value)}connect(e){this.wetOut.connect(e),this.dryOut.connect(e)}};class l{constructor(e,t){this.context=e,this.input=e.createGain(),this.output=this.context.createGain()}connect(e){this.output.connect(e)}disconnect(){this.output.disconnect.apply(this.output,arguments)}}function a(e){const t=e[0],s={};return Object.getOwnPropertyNames(AudioParam.prototype).filter(e=>"function"==typeof t[e]).forEach(n=>{s[n]=((...s)=>{const i=Array.prototype.slice.call(s);e.forEach(e=>{t[n].apply(e,i)})})}),Object.defineProperties(s,{value:{get:function(){return t.value},set:function(t){e.forEach(e=>{e.value=t})}}}),s}class d extends l{constructor(e,t){super(e,t);const{delayTime:s,resonance:n,dampening:i}=t;this.lowPass=new BiquadFilterNode(e,{type:"lowpass",frequency:i,Q:-3.0102999566398125}),this.delay=new DelayNode(e,{delayTime:s}),this.gain=e.createGain(),this.gain.gain.value=n,this.input.connect(this.delay).connect(this.lowPass).connect(this.gain).connect(this.input).connect(this.output)}get resonance(){return this.gain.gain}get dampening(){return this.delay.delayTime}get delayTime(){return this.delay.delayTime}}var c=class extends l{constructor(e,t){super(e,t);const{roomSize:s,dampening:n,wetGain:i,dryGain:o}=t,r=[1557,1617,1491,1422,1277,1356,1188,1116].map(e=>e/44100);this.wet=e.createGain(),this.wet.gain.setValueAtTime(i,e.currentTime),this.dry=e.createGain(),this.dry.gain.setValueAtTime(o,e.currentTime),this.merger=e.createChannelMerger(2),this.splitter=e.createChannelSplitter(2),this.combFilters=r.map(t=>new d(e,{dampening:n,resonance:s,delayTime:t}));const l=this.combFilters.slice(0,4),a=this.combFilters.slice(4);this.allPassFilters=[225,556,441,341].map(t=>new BiquadFilterNode(e,{type:"allpass",frequency:t})),this.input.connect(this.wet).connect(this.splitter),this.input.connect(this.dry).connect(this.output),l.forEach(e=>{this.splitter.connect(e.input,0).connect(this.merger,0,0)}),a.forEach(e=>{this.splitter.connect(e.input,1).connect(this.merger,0,1)}),this.merger.connect(this.allPassFilters[0]).connect(this.allPassFilters[1]).connect(this.allPassFilters[2]).connect(this.allPassFilters[3]).connect(this.output),this.output.gain.value=.3}get wetGain(){return this.wet.gain}get dryGain(){return this.dry.gain}get roomSize(){return a(this.combFilters.map(e=>e.resonance))}get dampening(){return a(this.combFilters.map(e=>e.dampening))}};var h=class{constructor(e,t){this.context=e,this.input=new GainNode(e),t.connect(this.input),this.premixer={dry:new GainNode(e,{gain:0}),wet:new GainNode(e,{gain:1})},this.input.connect(this.premixer.dry),this.input.connect(this.premixer.wet),this.toggles={reverb:!0,distortion:!0},this.output=new GainNode(e),this.distortion=new WaveShaperNode(e,{curve:this.makeDistortionCurve(50),oversample:"4x"}),this.reverb=new c(e,{roomSize:.9,dampening:3e3,wetGain:.8,dryGain:.2}),this.premixer.wet.connect(this.distortion),this.distortion.connect(this.reverb.input),this.reverb.connect(this.output),this.premixer.dry.connect(this.output),this.toggleReverb=this.toggleReverb.bind(this),this.toggleDistortion=this.toggleDistortion.bind(this)}toggleReverb(){this.toggles.reverb?(this.reverb.disconnect(),this.toggles.distortion?(this.distortion.disconnect(),this.distortion.connect(this.output)):(this.premixer.wet.disconnect(),this.premixer.wet.connect(this.output)),this.toggles.reverb=!1):(this.toggles.distortion?(this.distortion.disconnect(),this.distortion.connect(this.reverb.input),this.reverb.connect(this.output)):(this.premixer.wet.disconnect(),this.premixer.wet.connect(this.reverb.input),this.reverb.connect(this.output)),this.toggles.reverb=!0)}toggleDistortion(){this.toggles.distortion?(this.distortion.disconnect(),this.toggles.reverb?(this.premixer.wet.disconnect(),this.premixer.wet.connect(this.reverb.input)):(this.premixer.wet.disconnect(),this.premixer.wet.connect(this.output)),this.toggles.distortion=!1):(this.toggles.reverb?(this.premixer.wet.disconnect(),this.premixer.wet.connect(this.distortion),this.distortion.connect(this.reverb.input)):(this.premixer.wet.disconnect(),this.premixer.wet.connect(this.distortion),this.distortion.connect(this.output)),this.toggles.distortion=!0)}setOptions(e){void 0!==e.distortion&&(this.distortion.curve=this.makeDistortionCurve(100*e.distortion)),void 0!==e.reverb&&(this.reverb.roomSize.value=e.reverb/1.01),void 0!==e.mix&&(this.premixer.wet.gain.value=e.mix,this.premixer.dry.gain.value=1-e.mix)}makeDistortionCurve(e){const t=e;let s=new Float32Array(4410);const n=Math.PI/180;let i;for(let e=0;e<4410;e++)i=2*e/4410-1,s[e]=(3+t)*i*20*n/(Math.PI+t*Math.abs(i));return s}connect(e){this.output.connect(e)}};var u=class{constructor(e,t,s,n){this.context=e,this.synth=t,this.filters=[n.filter1.frequency,n.filter2.frequency],this.ampOut=s.ampOut.gain,this.amp={attack:.1,release:.1},this.filter={attack:.1,release:.1},this.attack=this.attack.bind(this),this.release=this.release.bind(this),this.interval=null}setAmpEnvelope(e){Object.keys(e).forEach(t=>{this.amp[t]=e[t]})}setFilterEnvelope(e){Object.keys(e).forEach(t=>{this.filter[t]=e[t]})}attack(){let e,t;e=this.amp.attack<=0?1:1/(1e3*this.amp.attack/10),t=this.filter.attack<=0?this.synth.endFreq1-this.synth.startFreq1:(this.synth.endFreq1-this.synth.startFreq1)/(1e3*this.filter.attack/10),null!==this.interval&&(clearInterval(this.interval),this.interval=null),this.interval=setInterval(function(){this.attackInterval(e,t)}.bind(this),10)}release(){let e,t;e=this.amp.release<=0?0-this.ampOut.value:0-this.ampOut.value/(1e3*this.amp.release/10),t=this.filter.attack<=0?this.synth.startFreq1-this.filters[0].value:(this.synth.startFreq1-this.filters[0].value)/(1e3*this.filter.attack/10),null!==this.interval&&(clearInterval(this.interval),this.interval=null),this.interval=setInterval(function(){this.decayInterval(e,t)}.bind(this),10)}attackInterval(e,t){this.filters[0].value<this.synth.endFreq1&&(this.filters[0].value+=t),this.filters[1].value<this.synth.endFreq2&&(this.filters[1].value+=t),this.ampOut.value<1&&(this.ampOut.value+=e),Math.abs(this.filters[0].value-this.synth.endFreq1)<5&&Math.abs(this.filters[1].value-this.synth.endFreq2)<5&&Math.abs(this.ampOut.value-1)<.01&&(clearInterval(this.interval),this.interval=null)}decayInterval(e,t){this.filters[0].value>this.synth.startFreq1&&(this.filters[0].value+=t),this.filters[1].value>this.synth.startFreq2&&(this.filters[1].value+=t),this.ampOut.value>0&&(this.ampOut.value+=e),Math.abs(this.filters[0].value-this.synth.startFreq1)<5&&Math.abs(this.filters[1].value-this.synth.startFreq2)<5&&this.ampOut.value<.01&&(clearInterval(this.interval),this.interval=null)}};var m=class{constructor(e,t){this.context=e,this.volume=new GainNode(e,{gain:.7}),t.connect(this.volume)}connect(e){this.volume.connect(e)}setVolume(e){this.volume.gain.value=e}};var p=class{constructor(e,t){this.lfo=e.createOscillator(),this.lfo.frequency.value=1,this.modAmmt=e.createGain(),this.params=[],this.maxAmmt=0,this.lfo.start(),this.lfo.connect(this.modAmmt)}setParam(e,t){this.params=e,this.maxAmmt="amp"===t?.7:"filter"===t?1e4:"freq"===t?25:0,this.modAmmt.disconnect(),this.modAmmt.gain.value=this.maxAmmt/2,e.forEach(e=>this.modAmmt.connect(e))}setOptions(e){e.frequency&&(this.lfo.frequency.value=e.frequency),e.amplitude&&(this.modAmmt.gain.value=this.maxAmmt*e.amplitude)}};var v=class{constructor(e){this.state="pause",this.currFreq=440,this.oscilloscopeVals={},this.context=e,this.semitone=Math.pow(2,1/12),this.octave=3;let t=new i({type:"sine",context:e}),s=new i({type:"square",context:e}),n=new i({type:"sawtooth",context:e});this.oscBank=[t,s,n],this.preMixer=new o(e,this.oscBank),this.filters=new r(e),this.envAmt=1,this.startFreq1=400,this.endFreq1=this.startFreq1+1e3*this.envAmt,this.startFreq2=400,this.endFreq2=this.startFreq2+1e3*this.envAmt,this.envelopes=new u(e,this,this.preMixer,this.filters),this.preMixer.connect(this.filters),this.effects=new h(e,this.filters),this.analyser=e.createAnalyser(),this.analyser2=e.createAnalyser(),this.master=new m(e,this.effects),this.master.connect(this.analyser),this.master.connect(this.analyser2),this.analyser.connect(e.destination),this.stop=this.stop.bind(this),this.lfo=new p(e,this),this.LFO_PARAMS={filter:[this.filters.filter1.frequency,this.filters.filter2.frequency],amp:[this.master.volume.gain],freq:this.oscBank.map(e=>e.node.frequency),none:[]},this.toggleEffect=this.toggleEffect.bind(this)}setLfo(e){e.mode&&this.lfo.setParam(this.LFO_PARAMS[e.mode],e.mode),e.params&&this.lfo.setOptions(e.params)}preMix(e){this.preMixer.setLevels(e)}setMasterVolume(e){this.master.setVolume(e)}setFilterOptions(e){if(void 0!==e.envAmt&&this.filters.setEnvelope(e.envAmt),void 0!==e.filter1){let t=e.filter1;void 0!==t.frequency&&(this.startFreq1=parseInt(t.frequency),this.endFreq1=this.startFreq1+1e3*this.envAmt,"play"===this.state?this.filters.setFrequency(1,this.endFreq1):this.filters.setFrequency(1,this.startFreq1)),void 0!==t.Q&&this.filters.setQ(0,t.Q),void 0!==t.type&&this.filters.setType(0,t.type)}if(void 0!==e.filter2){let t=e.filter2;void 0!==t.frequency&&(this.startFreq2=parseInt(t.frequency),this.endFreq2=this.startFreq2+1e3*this.envAmt,"play"===this.state?this.filters.setFrequency(1,this.endFreq2):this.filters.setFrequency(1,this.startFreq2)),void 0!==t.Q&&this.filters.setQ(1,t.Q),void 0!==t.type&&this.filters.setType(1,t.type)}}setFilterLevels(e){this.filters.setLevels(e)}setEnvelope(e){"amp"===e.type?this.envelopes.setAmpEnvelope(e):"filter"===e.type?this.envelopes.setFilterEnvelope(e):"filterAmmt"===e.type&&this.setEnvAmmt(e.ammt)}setEnvAmmt(e){this.envAmmt=e,this.endFreq1=this.startFreq1+1e3*this.envAmt,this.endFreq2=this.startFreq2+1e3*this.envAmt}playFreq(e){this.state="play",this.currFreq=e,"suspended"===this.context.state&&this.context.resume(),this.oscBank.forEach(function(t){t.setFrequency(e)}),this.envelopes.attack()}playNote(e){const t=440*Math.pow(this.semitone,n[e]);this.playFreq(t)}stop(){this.state="pause",this.envelopes.release()}toggleEffect(e){"distortion"===e?this.effects.toggleDistortion():this.effects.toggleReverb()}setEffectsOptions(e){this.effects.setOptions(e)}setWaveform(e){this.oscBank[e.index].setWave(e.type)}setOscInterval(e){this.oscBank[e.index].setInterval(e.semitones)}};var f=function(e){document.getElementById("osc1Dropdown").addEventListener("click",function(){document.getElementById("osc1Wave").classList.toggle("showOsc")}),document.getElementById("osc2Dropdown").addEventListener("click",function(){document.getElementById("osc2Wave").classList.toggle("showOsc")}),document.getElementById("osc3Dropdown").addEventListener("click",function(){document.getElementById("osc3Wave").classList.toggle("showOsc")}),window.addEventListener("click",function(e){const t=document.getElementsByClassName("dropdownContent");let s,n;for(let i=0;i<t.length;i++)n=(s=t[i]).parentElement,(s.classList.contains("showOsc")||s.classList.contains("showFilter"))&&n!==e.target.parentElement&&(s.classList.remove("showOsc"),s.classList.remove("showFilter"))}),document.getElementById("osc1Vol").addEventListener("input",function(t){e.preMix({level1:t.target.value})}.bind(this)),document.getElementById("osc2Vol").addEventListener("input",function(t){e.preMix({level2:t.target.value})}.bind(this)),document.getElementById("osc3Vol").addEventListener("input",function(t){e.preMix({level3:t.target.value})}.bind(this)),document.getElementById("osc1Interval").addEventListener("input",function(t){e.setOscInterval({index:0,semitones:t.target.value})}.bind(this)),document.getElementById("osc2Interval").addEventListener("input",function(t){e.setOscInterval({index:1,semitones:t.target.value})}.bind(this)),document.getElementById("osc3Interval").addEventListener("input",function(t){e.setOscInterval({index:2,semitones:t.target.value})}.bind(this)),document.getElementById("osc1Wave").addEventListener("click",function(t){const s=document.getElementById("osc1Dropdown");"osc1Sine"===t.target.id?(s.innerHTML="sine",e.setWaveform({index:0,type:"sine"})):"osc1Square"===t.target.id?(s.innerHTML="square",e.setWaveform({index:0,type:"square"})):"osc1Triangle"===t.target.id?(s.innerHTML="triangle",e.setWaveform({index:0,type:"triangle"})):"osc1Saw"===t.target.id&&(s.innerHTML="sawtooth",e.setWaveform({index:0,type:"sawtooth"}))}.bind(this)),document.getElementById("osc2Wave").addEventListener("click",function(t){const s=document.getElementById("osc2Dropdown");"osc2Sine"===t.target.id?(s.innerHTML="sine",e.setWaveform({index:1,type:"sine"})):"osc2Square"===t.target.id?(s.innerHTML="square",e.setWaveform({index:1,type:"square"})):"osc2Triangle"===t.target.id?(s.innerHTML="triangle",e.setWaveform({index:1,type:"triangle"})):"osc2Saw"===t.target.id&&(s.innerHTML="sawtooth",e.setWaveform({index:1,type:"sawtooth"}))}.bind(this)),document.getElementById("osc3Wave").addEventListener("click",function(t){const s=document.getElementById("osc3Dropdown");"osc3Sine"===t.target.id?(s.innerHTML="sine",e.setWaveform({index:2,type:"sine"})):"osc3Square"===t.target.id?(s.innerHTML="square",e.setWaveform({index:2,type:"square"})):"osc3Triangle"===t.target.id?(s.innerHTML="triangle",e.setWaveform({index:2,type:"triangle"})):"osc3Saw"===t.target.id&&(s.innerHTML="sawtooth",e.setWaveform({index:2,type:"sawtooth"}))}.bind(this))};var y=function(e){document.getElementById("filter1Dropdown").addEventListener("click",function(){document.getElementById("filter1Type").classList.toggle("showFilter")}),document.getElementById("filter1Type").addEventListener("click",function(t){const s=document.getElementById("filter1Dropdown");"filter1Lowpass"===t.target.id?(s.innerHTML="lowpass",e.setFilterOptions({filter1:{type:"lowpass"}})):"filter1Highpass"===t.target.id?(s.innerHTML="highpass",e.setFilterOptions({filter1:{type:"highpass"}})):"filter1Bandpass"===t.target.id&&(s.innerHTML="bandpass",e.setFilterOptions({filter1:{type:"bandpass"}}))}.bind(this)),document.getElementById("filter1Freq").addEventListener("input",function(t){e.setFilterOptions({filter1:{frequency:t.target.value}})}.bind(this)),document.getElementById("filter1Q").addEventListener("input",function(t){e.setFilterOptions({filter1:{Q:t.target.value}})}.bind(this)),document.getElementById("filter1Level").addEventListener("input",function(t){e.setFilterLevels({series:t.target.value})}.bind(this)),document.getElementById("filter2Dropdown").addEventListener("click",function(){document.getElementById("filter2Type").classList.toggle("showFilter")}),document.getElementById("filter2Type").addEventListener("click",function(t){const s=document.getElementById("filter2Dropdown");"filter2Lowpass"===t.target.id?(s.innerHTML="lowpass",e.setFilterOptions({filter2:{type:"lowpass"}})):"filter2Highpass"===t.target.id?(s.innerHTML="highpass",e.setFilterOptions({filter2:{type:"highpass"}})):"filter2Bandpass"===t.target.id&&(s.innerHTML="bandpass",e.setFilterOptions({filter2:{type:"bandpass"}}))}.bind(this)),document.getElementById("filter2Freq").addEventListener("input",function(t){e.setFilterOptions({filter2:{frequency:t.target.value}})}.bind(this)),document.getElementById("filter2Q").addEventListener("input",function(t){e.setFilterOptions({filter2:{Q:t.target.value}})}.bind(this)),document.getElementById("filter2Level").addEventListener("input",function(t){e.setFilterLevels({wet:t.target.value/2})}.bind(this))};var g=class{constructor(e){this.synth=e,this.mode="amp",this.envAttack=document.getElementById("envelopeAttack"),this.envRelease=document.getElementById("envelopeRelease"),this.filterButton=document.getElementById("envelopeFilter"),this.ampButton=document.getElementById("envelopeAmp"),this.setupEventListeners()}setupEventListeners(){this.envAttack.addEventListener("input",function(e){this.synth.setEnvelope({type:this.mode,attack:parseFloat(e.target.value)})}.bind(this)),this.envRelease.addEventListener("input",function(e){this.synth.setEnvelope({type:this.mode,release:parseFloat(e.target.value)})}.bind(this)),this.filterButton.addEventListener("click",function(e){"filter"!==this.mode&&(this.filterButton.classList.toggle("buttonSelected"),this.ampButton.classList.toggle("buttonSelected")),this.mode="filter",this.envAttack.value=this.synth.envelopes.filter.attack,this.envRelease.value=this.synth.envelopes.filter.release}.bind(this)),this.ampButton.addEventListener("click",function(e){"amp"!==this.mode&&(this.filterButton.classList.toggle("buttonSelected"),this.ampButton.classList.toggle("buttonSelected")),this.mode="amp",this.envAttack.value=this.synth.envelopes.amp.attack,this.envRelease.value=this.synth.envelopes.amp.release}.bind(this))}};const L=function(e){const t=document.getElementById("distortionToggle"),s=document.getElementById("reverbToggle"),n=document.getElementById("distortionAmmt"),i=document.getElementById("reverbAmmt"),o=document.getElementById("effectsMix");t.addEventListener("click",function(){t.classList.toggle("buttonSelected"),e.toggleEffect("distortion")}.bind(this)),s.addEventListener("click",function(){s.classList.toggle("buttonSelected"),e.toggleEffect("reverb")}),n.addEventListener("input",function(t){e.setEffectsOptions({distortion:parseFloat(t.target.value)})}),i.addEventListener("input",function(t){e.setEffectsOptions({reverb:parseFloat(t.target.value)})}),o.addEventListener("input",function(t){e.setEffectsOptions({mix:parseFloat(t.target.value)})})};var E=function(){const e=document.getElementById("infoLeft"),t=document.getElementById("infoRight");e.innerHTML="Welcome to SympleSynth, my homebrewed JavaScript synthesizer for modern browsers! Play notes using your mouse or keyboard, or modify your sound using the controls.",t.innerHTML="Mouse over one of the controls to learn more.";const s={osc1Wave:document.getElementById("osc1Dropdown"),osc1Interval:document.getElementById("osc1Interval"),osc1Vol:document.getElementById("osc1Vol"),osc2Wave:document.getElementById("osc2Dropdown"),osc2Interval:document.getElementById("osc2Interval"),osc2Vol:document.getElementById("osc2Vol"),osc3Wave:document.getElementById("osc3Dropdown"),osc3Interval:document.getElementById("osc3Interval"),osc3Vol:document.getElementById("osc3Vol"),octaveControl:document.getElementById("synthOctave"),filter1Type:document.getElementById("filter1Dropdown"),filter1Freq:document.getElementById("filter1Freq"),filter1Q:document.getElementById("filter1Q"),filter2Type:document.getElementById("filter2Dropdown"),filter2Freq:document.getElementById("filter2Freq"),filter2Q:document.getElementById("filter2Q"),filterSeries:document.getElementById("filter1Level"),filterMix:document.getElementById("filter2Level"),distortionToggle:document.getElementById("distortionToggle"),reverbToggle:document.getElementById("reverbToggle"),distortionLevel:document.getElementById("distortionAmmt"),reverbLevel:document.getElementById("reverbAmmt"),effectsMix:document.getElementById("effectsMix"),lfoVolume:document.getElementById("lfoAmp"),lfoFreq:document.getElementById("lfoFreq"),lfoFilter:document.getElementById("lfoFilter"),lfoRate:document.getElementById("lfoFrequency"),lfoAmmt:document.getElementById("lfoAmplitude"),envelopeAmp:document.getElementById("envelopeAmp"),envelopeFilter:document.getElementById("envelopeFilter"),envelopeAttack:document.getElementById("envelopeAttack"),envelopeRelease:document.getElementById("envelopeRelease"),envelopeAmmt:document.getElementById("envelopeAmmt"),masterVol:document.getElementById("masterVolume")};Object.values(s).forEach(e=>{e.addEventListener("mouseleave",()=>{t.innerHTML="Mouse over one of the controls to learn more."})}),s.osc1Wave.addEventListener("mouseover",()=>{t.innerHTML="Oscillator 1 Wave: Click to select the waveform being played by oscillator 1. Different waveforms will create different overtones and a noticably different sound."}),s.osc1Interval.addEventListener("mouseover",()=>{t.innerHTML="Oscillator 1 Interval: Select the interval that oscillator 1 will be transposed up or down. Slide all the way to the right to transpose a full octave up, or all the way left to transpose one octave down."}),s.osc1Vol.addEventListener("mouseover",()=>{t.innerHTML="Oscillator 1 Volume: Adjust the volume of oscillator 1 in the mix."}),s.osc2Wave.addEventListener("mouseover",()=>{t.innerHTML="Oscillator 2 Wave: Click to select the waveform being played by oscillator 2. Different waveforms will create different overtones and a noticably different sound."}),s.osc2Interval.addEventListener("mouseover",()=>{t.innerHTML="Oscillator 2 Interval: Select the interval that oscillator 2 will be transposed up or down. Slide all the way to the right to transpose a full octave up, or all the way left to transpose one octave down."}),s.osc2Vol.addEventListener("mouseover",()=>{t.innerHTML="Oscillator 2 Volume: Adjust the volume of oscillator 2 in the mix"}),s.osc3Wave.addEventListener("mouseover",()=>{t.innerHTML="Oscillator 3 Wave: Click to select the waveform being played by oscillator 3. Different waveforms will create different overtones and a noticably different sound."}),s.osc3Interval.addEventListener("mouseover",()=>{t.innerHTML="Oscillator 3 Interval: Select the interval that oscillator 3 will be transposed up or down. Slide all the way to the right to transpose a full octave up, or all the way left to transpose one octave down."}),s.osc3Vol.addEventListener("mouseover",()=>{t.innerHTML="Oscillator 3 Volume: Adjust the volume of oscillator 3 in the mix."}),s.octaveControl.addEventListener("mouseover",()=>{t.innerHTML="Octave Control: Adjust the octave of the whole instrument."}),s.filter1Type.addEventListener("mouseover",()=>{t.innerHTML="Filter 1 Type: Click to select a type of filter. Highpass filters exclude low frequencies, lowpass filters exclude high frequencies, and bandpass filters exclude frequencies outside of an allowed range, or 'band'."}),s.filter1Freq.addEventListener("mouseover",()=>{t.innerHTML="Filter 1 Frequency: Select the cutoff frequency for filter 1. This will determine the frequency at which the filter starts to exclude frequencies from the signal."}),s.filter1Q.addEventListener("mouseover",()=>{t.innerHTML="Filter 1 'Q value': This slider controls the ammount of resonance for highpass and lowpass filters. For bandpass filters, it determines the range of allowed frequencies (the width of the 'band')."}),s.filter2Type.addEventListener("mouseover",()=>{t.innerHTML="Filter 2 Type: Click to select a type of filter. Highpass filters exclude low frequencies, lowpass filters exclude high frequencies, and bandpass filters exclude frequencies outside of an allowed range, or 'band'."}),s.filter2Freq.addEventListener("mouseover",()=>{t.innerHTML="Filter 2 Frequency: Select the cutoff frequency for filter 2. This will determine the frequency at which the filter starts to exclude frequencies from the signal."}),s.filter2Q.addEventListener("mouseover",()=>{t.innerHTML="Filter 2 'Q value': This slider controls the ammount of resonance for highpass and lowpass filters. For bandpass filters, it determines the range of allowed frequencies (the width of the 'band')."}),s.filterSeries.addEventListener("mouseover",()=>{t.innerHTML="Series/Parallel Control: Adjust whether the filters run in series, or in parallel. Slide to the left to run filters more in parallel (filter outputs are independent from each other), or slide to the right to run them in series (the output of filter 1 goes into the input of filter 2)."}),s.filterMix.addEventListener("mouseover",()=>{t.innerHTML="Filter Wet/Dry Mix: Adjust how much the filters will affect the output sound. Slide to the left to get more unfiltered sound from the oscillators, or slide to the right to get more of the filtered signal."}),s.distortionToggle.addEventListener("mouseover",()=>{t.innerHTML="Distortion: Click to toggle distortion effect."}),s.reverbToggle.addEventListener("mouseover",()=>{t.innerHTML="Reverb: Click to toggle reverb effect."}),s.distortionLevel.addEventListener("mouseover",()=>{t.innerHTML="Distortion Ammount: Adjust the ammount of distortion to be applied to the signal when the distortion effect is on."}),s.reverbLevel.addEventListener("mouseover",()=>{t.innerHTML="Reverb Ammount: Adjust the ammount of reverb to be applied to the signal when the reverb effect is on."}),s.effectsMix.addEventListener("mouseover",()=>{t.innerHTML="Effects Wet/Dry Mix: Adjust how much the effects will affect the output sound. Slide to the left to get more of the 'dry' signal, with no effects."}),s.lfoVolume.addEventListener("mouseover",()=>{t.innerHTML="LFO Volume Toggle: When this option is selected, the instrument's volume will be modulated by the LFO, a low-frequency sinusoidal wave. This can create a tremolo effect."}),s.lfoFreq.addEventListener("mouseover",()=>{t.innerHTML="LFO Pitch Toggle: When this option is selected, the instrument's overall pitch will be modulated by the LFO, a low-frequency sinusoidal wave. This can create a vibrato effect"}),s.lfoFilter.addEventListener("mouseover",()=>{t.innerHTML="LFO Filter Toggle: When this option is selected, the frequency of the two filters will be modulated by the LFO, a low-frequency sinusoidal wave."}),s.lfoRate.addEventListener("mouseover",()=>{t.innerHTML="LFO Frequency: Adjust the frequency of the LFO to change how fast the modulation occurs."}),s.lfoAmmt.addEventListener("mouseover",()=>{t.innerHTML="LFO Ammount: Adjust the ammount of modulation to determine how much the LFO will affect the parameter it's mapped to."}),s.envelopeAmp.addEventListener("mouseover",()=>{t.innerHTML="Volume Envelope: Selecting this option will allow you to adjust the attack and release times of the volume envelope, i.e. how fast the volume fades in and fades out when pressing and releasing the keys."}),s.envelopeFilter.addEventListener("mouseover",()=>{t.innerHTML="Filter Envelope: Selecting this option will allow you to adjust the attack and release times of the filter envelope, i.e. how fast the volume filter frequency ramps up and down when pressing and releasing the keys."}),s.envelopeAttack.addEventListener("mouseover",()=>{t.innerHTML="Envelope Attack: Adjust the ammount of time after pressing a key before the envelope reaches its maximum value. Slide up to make the volume or filter frequency ramp up more slowly."}),s.envelopeRelease.addEventListener("mouseover",()=>{t.innerHTML="Envelope Release: Adjust the ammount of time after releasing a key before the envelope reaches its minimum value. Slide up to make the volume or filter frequency ramp down more slowly."}),s.envelopeAmmt.addEventListener("mouseover",()=>{t.innerHTML="Filter Ammount: Adjust the ammount that the filter frequency will be affected by the filter envelope."}),s.masterVol.addEventListener("mouseover",()=>{t.innerHTML="Master Volume: Adjust the overall volume of the instrument."})};var w=class{constructor(e){this.ampToggle=document.getElementById("lfoAmp"),this.filterToggle=document.getElementById("lfoFilter"),this.freqToggle=document.getElementById("lfoFreq"),this.ammt=document.getElementById("lfoAmplitude"),this.frequency=document.getElementById("lfoFrequency"),this.synth=e,this.ampToggle.addEventListener("click",function(e){this.ampToggle.classList.contains("buttonSelected")?(this.ampToggle.classList.remove("buttonSelected"),this.synth.setLfo({mode:"none"})):(this.ampToggle.classList.add("buttonSelected"),this.filterToggle.classList.remove("buttonSelected"),this.freqToggle.classList.remove("buttonSelected"),this.synth.setLfo({mode:"amp"}))}.bind(this)),this.filterToggle.addEventListener("click",function(e){this.filterToggle.classList.contains("buttonSelected")?(this.filterToggle.classList.remove("buttonSelected"),this.synth.setLfo({mode:"none"})):(this.filterToggle.classList.add("buttonSelected"),this.ampToggle.classList.remove("buttonSelected"),this.freqToggle.classList.remove("buttonSelected"),this.synth.setLfo({mode:"filter"}))}.bind(this)),this.freqToggle.addEventListener("click",function(e){this.freqToggle.classList.contains("buttonSelected")?(this.freqToggle.classList.remove("buttonSelected"),this.synth.setLfo({mode:"none"})):(this.freqToggle.classList.add("buttonSelected"),this.filterToggle.classList.remove("buttonSelected"),this.ampToggle.classList.remove("buttonSelected"),this.synth.setLfo({mode:"freq"}))}.bind(this)),this.ammt.addEventListener("input",function(e){this.synth.setLfo({params:{amplitude:parseFloat(e.target.value)}})}.bind(this)),this.frequency.addEventListener("input",function(e){this.synth.setLfo({params:{frequency:parseFloat(e.target.value)}})}.bind(this))}};var b=class{constructor(e){this.synth=e,this.playNote=this.playNote.bind(this),this.setupEventListeners(),this.envelopeControls=new g(e),this.lfoControls=new w(e)}setupEventListeners(){const e=document.querySelector(".keyboard");e.addEventListener("mouseover",e=>{e.stopPropagation();let t=e.target;t.classList.contains("keyPressed")||t.classList.add("keyHover")}),e.addEventListener("mouseout",e=>{e.stopPropagation(),e.target.classList.remove("keyHover")}),e.addEventListener("mouseup",()=>{this.synth.stop(),Array.from(document.querySelectorAll(".key")).forEach(e=>e.classList.remove("keyPressed"))});const t=document.getElementById("C");t.addEventListener("mousedown",e=>{e.stopPropagation(),t.classList.add("keyPressed"),this.playNote("C")()}),t.addEventListener("mouseup",this.synth.stop);const s=document.getElementById("Cs");s.addEventListener("mousedown",e=>{e.stopPropagation(),s.classList.add("keyPressed"),this.playNote("Cs")()}),s.addEventListener("mouseup",this.synth.stop);const n=document.getElementById("D");n.addEventListener("mousedown",e=>{e.stopPropagation(),n.classList.add("keyPressed"),this.playNote("D")()}),n.addEventListener("mouseup",this.synth.stop);const i=document.getElementById("Ds");i.addEventListener("mousedown",e=>{e.stopPropagation(),i.classList.add("keyPressed"),this.playNote("Ds")()}),i.addEventListener("mouseup",this.synth.stop);const o=document.getElementById("E");o.addEventListener("mousedown",e=>{e.stopPropagation(),o.classList.add("keyPressed"),this.playNote("E")()}),o.addEventListener("mouseup",this.synth.stop);const r=document.getElementById("F");r.addEventListener("mousedown",e=>{e.stopPropagation(),r.classList.add("keyPressed"),this.playNote("F")()}),r.addEventListener("mouseup",this.synth.stop);const l=document.getElementById("Fs");l.addEventListener("mousedown",e=>{e.stopPropagation(),l.classList.add("keyPressed"),this.playNote("Fs")()}),l.addEventListener("mouseup",this.synth.stop);const a=document.getElementById("G");a.addEventListener("mousedown",e=>{e.stopPropagation(),a.classList.add("keyPressed"),this.playNote("G")()}),a.addEventListener("mouseup",this.synth.stop);const d=document.getElementById("Gs");d.addEventListener("mousedown",e=>{e.stopPropagation(),d.classList.add("keyPressed"),this.playNote("Gs")()}),d.addEventListener("mouseup",this.synth.stop);const c=document.getElementById("A");c.addEventListener("mousedown",e=>{e.stopPropagation(),c.classList.add("keyPressed"),this.playNote("A")()}),c.addEventListener("mouseup",this.synth.stop);const h=document.getElementById("As");h.addEventListener("mousedown",e=>{e.stopPropagation(),h.classList.add("keyPressed"),this.playNote("As")()}),h.addEventListener("mouseup",this.synth.stop);const u=document.getElementById("B");u.addEventListener("mousedown",e=>{e.stopPropagation(),u.classList.add("keyPressed"),this.playNote("B")()}),u.addEventListener("mouseup",this.synth.stop);const m=document.getElementById("C2");m.addEventListener("mousedown",e=>{e.stopPropagation(),m.classList.add("keyPressed"),this.playNote("C2")()}),m.addEventListener("mouseup",this.synth.stop);const p=document.getElementById("Cs2");p.addEventListener("mousedown",e=>{e.stopPropagation(),p.classList.add("keyPressed"),this.playNote("Cs2")()}),p.addEventListener("mouseup",this.synth.stop);const v=document.getElementById("D2");v.addEventListener("mousedown",e=>{e.stopPropagation(),v.classList.add("keyPressed"),this.playNote("D2")()}),v.addEventListener("mouseup",this.synth.stop);const g=document.getElementById("Ds2");g.addEventListener("mousedown",e=>{e.stopPropagation(),g.classList.add("keyPressed"),this.playNote("Ds2")()}),g.addEventListener("mouseup",this.synth.stop);const w=document.getElementById("E2");w.addEventListener("mousedown",e=>{e.stopPropagation(),w.classList.add("keyPressed"),this.playNote("E2")()}),w.addEventListener("mouseup",this.synth.stop),document.addEventListener("keydown",e=>{const f=e.key.toLowerCase();"a"===f?(t.classList.add("keyPressed"),this.playNote("C")()):"w"===f?(s.classList.add("keyPressed"),this.playNote("Cs")()):"s"===f?(n.classList.add("keyPressed"),this.playNote("D")()):"e"===f?(i.classList.add("keyPressed"),this.playNote("Ds")()):"d"===f?(o.classList.add("keyPressed"),this.playNote("E")()):"f"===f?(r.classList.add("keyPressed"),this.playNote("F")()):"t"===f?(l.classList.add("keyPressed"),this.playNote("Fs")()):"g"===f?(a.classList.add("keyPressed"),this.playNote("G")()):"y"===f?(d.classList.add("keyPressed"),this.playNote("Gs")()):"h"===f?(c.classList.add("keyPressed"),this.playNote("A")()):"u"===f?(h.classList.add("keyPressed"),this.playNote("As")()):"j"===f?(u.classList.add("keyPressed"),this.playNote("B")()):"k"===f?(m.classList.add("keyPressed"),this.playNote("C2")()):"o"===f?(p.classList.add("keyPressed"),this.playNote("Cs2")()):"l"===f?(v.classList.add("keyPressed"),this.playNote("D2")()):"p"===f?(g.classList.add("keyPressed"),this.playNote("Ds2")()):";"===f&&(w.classList.add("keyPressed"),this.playNote("E2")())}),document.addEventListener("keyup",()=>{this.synth.stop(),Array.from(document.querySelectorAll(".key")).forEach(e=>e.classList.remove("keyPressed"))}),document.getElementById("masterVolume").addEventListener("input",function(e){this.synth.setMasterVolume(e.target.value)}.bind(this)),document.getElementById("synthOctave").addEventListener("input",function(e){this.synth.octave=e.target.value}.bind(this)),f(this.synth),y(this.synth),L(this.synth),E()}playNote(e){if(-1===e.search("2")){let t=e+this.synth.octave;return()=>{this.synth.playNote(t)}}{let t=(e=e.slice(0,e.length-1))+(parseInt(this.synth.octave)+1);return()=>{this.synth.playNote(t)}}}};if(!!window.chrome){const e=new v(new(window.AudioContext||window.webkitAudioContext));document.addEventListener("DOMContentLoaded",()=>{new b(e);const t=function(e){const t=document.getElementById("visualizer"),s=t.getContext("2d");e.analyser.fftSize=4096;let n=e.analyser.frequencyBinCount,i=new Uint8Array(n);return function o(){requestAnimationFrame(o),n=e.analyser.frequencyBinCount,i=new Uint8Array(n),e.analyser.getByteTimeDomainData(i);let r=!1,l=0;for(let e=0;e<n;e++)if(i[e]<128&&!1===r)r=!0;else if(!0===r&&i[e]>128&&0===l){l=e,i=i.slice(e);break}s.fillStyle="rgb(0,0,0)",s.fillRect(0,0,t.width,t.height),s.lineWidth=3,s.strokeStyle="rgb(255, 7, 28)",s.beginPath();let a=t.width/1e3,d=0;for(let e=0;e<1e3;e++){let n=i[e]/128*t.height/2;0==e?s.moveTo(d,n):s.lineTo(d,n),d+=a}s.lineTo(t.width,t.height/2),s.stroke()}}(e),s=function(e){const t=document.getElementById("visualizer2"),s=t.getContext("2d");e.analyser2.fftSize=256;let n=e.analyser.frequencyBinCount,i=new Uint8Array(n),o=new Uint8Array(n),r="rgb(0, 0, 0)";return function l(){requestAnimationFrame(l),e.analyser2.getByteFrequencyData(i),t.setAttribute("width",window.innerWidth),t.setAttribute("height",window.innerHeight),s.fillStyle=r,s.fillRect(0,0,t.width,t.height);let a,d,c,h,u,m=t.width/n*15,p=0,v=0;for(let e=3;e<n;e++)a=i[e]*(t.height/150),v+=i[e],o[e]<i[e]?o[e]=i[e]:o[e]>0&&(o[e]=o[e]-3),o[e]>250&&(o[e]=0),d=o[e]*(t.height/150)+10,s.fillStyle="rgb(0,0,0)",s.fillRect(p,t.height-a/2,m,a),o[e]>1&&(s.fillStyle="rgba(255, 255, 255)",s.fillRect(p,t.height-d/2,m,10)),p+=m+1;v=v/2e4*255,c=Math.round(v/1.5),h=0,u=0,v>60&&(h=Math.round(v-60)),v>150&&(u=Math.round(v-150)),r="rgb("+c+","+h+","+u+")"}}(e);t(),s();const n=document.getElementById("gitHub"),i=document.getElementById("linkedIn");n.addEventListener("click",()=>{console.log("click"),document.getElementById("gitHubLink").click()}),i.addEventListener("click",()=>{console.log("click"),document.getElementById("linkedInLink").click()})})}else{let e=document.createElement("SECTION"),t=document.createElement("DIV");e.classList.add("errorModal"),t.classList.add("errorTextBox");let s=document.createTextNode("Sorry! The Web Audio API is still fairly new to browsers, creating some compatibility issues. Please visit this site with Google Chrome.");t.appendChild(s),e.appendChild(t),document.addEventListener("DOMContentLoaded",()=>{document.querySelector("body").appendChild(e)})}}]);
//# sourceMappingURL=bundle.js.map