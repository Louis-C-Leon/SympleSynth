{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./App.js","webpack:///./GUI/effect_controls.js","webpack:///./GUI/envelope_controls.js","webpack:///./GUI/filter_controls.js","webpack:///./GUI/keyboard.js","webpack:///./GUI/osc_controls.js","webpack:///./GUI/visualizer.js","webpack:///./synthesizer/LFO.js","webpack:///./synthesizer/effects.js","webpack:///./synthesizer/envelopes.js","webpack:///./synthesizer/filters.js","webpack:///./synthesizer/keyboard_scale.js","webpack:///./synthesizer/master_mixer.js","webpack:///./synthesizer/oscillators.js","webpack:///./synthesizer/pre_mixer.js","webpack:///./synthesizer/reverb.js","webpack:///./synthesizer/synth.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAwC;AACF;AACG;;AAEzC;AACA;AACA;AACA,wBAAwB,0DAAK;AAC7B;;AAEA;AACA,uBAAuB,qDAAQ;AAC/B;AACA,eAAe,+DAAS;AACxB;AACA,CAAC,E;;;;;;;;;;;;ACfD;AAAA;AAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA,6BAA6B,uCAAuC;AACpE,GAAG;;AAEH;AACA,6BAA6B,mCAAmC;AAChE,GAAG;;AAEH;AACA,6BAA6B,gCAAgC;AAC7D,GAAG;;AAEH,C;;;;;;;;;;;;AC7BA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8BAA8B,oDAAoD;AAClF,KAAK;;AAEL;AACA,8BAA8B,qDAAqD;AACnF,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;;AAEe,+EAAgB,E;;;;;;;;;;;;AC5C/B;AAAA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,gCAAgC,UAAU,iBAAiB;AAC3D,OAAO;AACP;AACA,gCAAgC,UAAU,kBAAkB;AAC5D,OAAO;AACP;AACA,gCAAgC,UAAU,kBAAkB;AAC5D;AACA,KAAK;;AAEL;AACA;AACA,4BAA4B,UAAU,2BAA2B;AACjE,GAAG;;AAEH;AACA;AACA,4BAA4B,UAAU,mBAAmB;AACzD,GAAG;;AAEH;AACA;AACA,2BAA2B,uBAAuB;AAClD,GAAG;;;AAGH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,gCAAgC,UAAU,iBAAiB;AAC3D,OAAO;AACP;AACA,gCAAgC,UAAU,kBAAkB;AAC5D,OAAO;AACP;AACA,gCAAgC,UAAU,kBAAkB;AAC5D;AACA,KAAK;;AAEL;AACA;AACA,4BAA4B,UAAU,2BAA2B;AACjE,GAAG;;AAEH;AACA;AACA,4BAA4B,UAAU,mBAAmB;AACzD,GAAG;;AAEH;AACA;AACA,2BAA2B,wBAAwB;AACnD,GAAG;;;AAGH;;AAEe,kFAAmB,E;;;;;;;;;;;;AC5ElC;AAAA;AAAA;AAAA;AAAA;AAA8C;AACM;AACD;AACM;AACzD;AACA;AACA;AACA;AACA;AACA,gCAAgC,0DAAgB;AAChD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO,oBAAoB;AAC3B;AACA;AACA;AACA,KAAK,E;;AAEL;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL,IAAI,6DAAgB;AACpB,IAAI,gEAAmB;AACvB,IAAI,6EAAoB;AACxB;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEe,uEAAQ,E;;;;;;;;;;;;AC/OvB;AAAA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,qBAAqB,sBAAsB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,oBAAoB,uBAAuB;AAC3C,KAAK;;AAEL;AACA;AACA,oBAAoB,uBAAuB;AAC3C,KAAK;;AAEL;AACA;AACA,oBAAoB,uBAAuB;AAC3C,KAAK;;AAEL;AACA;AACA,4BAA4B,oCAAoC;AAChE,KAAK;;AAEL;AACA;AACA,4BAA4B,oCAAoC;AAChE,KAAK;;AAEL;AACA;AACA,4BAA4B,oCAAoC;AAChE,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD,OAAO;AACP;AACA,2BAA2B,yBAAyB;AACpD,OAAO;AACP;AACA,2BAA2B,2BAA2B;AACtD,OAAO;AACP;AACA,2BAA2B,2BAA2B;AACtD;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD,OAAO;AACP;AACA,2BAA2B,yBAAyB;AACpD,OAAO;AACP;AACA,2BAA2B,2BAA2B;AACtD,OAAO;AACP;AACA,2BAA2B,2BAA2B;AACtD;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD,OAAO;AACP;AACA,2BAA2B,yBAAyB;AACpD,OAAO;AACP;AACA,2BAA2B,2BAA2B;AACtD,OAAO;AACP;AACA,2BAA2B,2BAA2B;AACtD;AACA,KAAK;AACL;;AAEe,+EAAgB,E;;;;;;;;;;;;AClH/B;AAAA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,0B;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,mBAAmB,YAAY;AAC/B;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,wEAAS,E;;;;;;;;;;;;AC/CxB;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEe,kEAAG,E;;;;;;;;;;;;ACzBlB;AAAA;AAA8B;AAC9B;;AAEA;AACA;AACA;AACA;;AAEA,qBAAqB,yBAAyB,QAAQ,2BAA2B,QAAQ;;AAEzF;AACA;;AAEA,oBAAoB;AACpB;;AAEA,+CAA+C,sDAAsD;AACrG,sBAAsB,+CAAM,OAAO,wDAAwD;;AAE3F;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEe,sE;;;;;;;;;;;;AC/Gf;AAAA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gBAAgB;AAChB,mBAAmB;;AAEnB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,KAAK,O;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,KAAK,O;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEe,wEAAS,E;;;;;;;;;;;;AC7HxB;AAAA;;AAEA;AACA;;AAEA,8CAA8C,eAAe;AAC7D,8CAA8C,eAAe;AAC7D;AACA;;AAEA;;AAEA,qCAAqC,UAAU;AAC/C,qCAAqC,OAAO;AAC5C,qCAAqC,QAAQ;AAC7C,uCAAuC,UAAU;;AAEjD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEe,yEAAU,E;;;;;;;;;;;;ACzEzB;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,+EAAgB,E;;;;;;;;;;;;ACzF/B;AAAA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEe,0EAAW,E;;;;;;;;;;;;ACjB1B;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,+B;AACA;;AAEA;;AAEe,yEAAU,E;;;;;;;;;;;;ACtCzB;AAAA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,qCAAqC,QAAQ;;AAE7C;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gCAAgC,UAAU;AAC1C,gCAAgC,UAAU;;AAE1C;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEe,uEAAQ,E;;;;;;;;;;;;AC5DvB;AAAA;AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,WAAW,sDAAsD;AACjE,8CAA8C,mDAAmD;AACjG,qCAAqC,YAAY;AACjD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,kDAAkD;AAC7D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8CAA8C,gCAAgC;AAC9E;AACA;AACA;AACA,mDAAmD,2BAA2B;AAC9E;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,qE;;;;;;;;;;;;AC9If;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC;AACD;AACJ;AACH;AACA;AACI;AACG;AACf;AACe;;AAEvC;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,oDAAU,EAAE,2BAA2B;AAC1D,mBAAmB,oDAAU,EAAE,6BAA6B;AAC5D,mBAAmB,oDAAU,EAAE,+BAA+B;AAC9D;;AAEA,wBAAwB,kDAAQ;AAChC,uBAAuB,gDAAO;;AAE9B;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB,kDAAS;AAClC;;AAEA,uBAAuB,gDAAO;AAC9B;AACA,sBAAsB,qDAAS;;AAE/B;AACA;;AAEA;;AAEA,mBAAmB,4CAAG;;AAEtB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA,+CAA+C,uDAAQ;AACvD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEe,oEAAK,E","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./App.js\");\n","import Synth from './synthesizer/synth';\nimport Keyboard from './GUI/keyboard';\nimport visualize from './GUI/visualizer';\n\nconst Ctx = window.AudioContext || window.webkitAudioContext;\nconst currContext = new Ctx();\nwindow.context = currContext;\nconst synthesizer = new Synth(currContext);\nwindow.synth = synthesizer;\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const keyboard = new Keyboard(synthesizer);\n  window.keyboard = keyboard;\n  const draw = visualize(synthesizer);\n  draw();\n});","export const setupEffectsControls = function(synth) {\n  const distortionToggle = document.getElementById(\"distortionToggle\");\n  const reverbToggle = document.getElementById(\"reverbToggle\");\n  const distortionAmmt = document.getElementById(\"distortionAmmt\");\n  const reverbAmmt = document.getElementById(\"reverbAmmt\");\n  const effectsMix = document.getElementById(\"effectsMix\");\n\n  distortionToggle.addEventListener(\"click\", function(){\n    distortionToggle.classList.toggle(\"buttonSelected\");\n    synth.toggleEffect(\"distortion\");\n  }.bind(this));\n\n  reverbToggle.addEventListener(\"click\", function(){\n    reverbToggle.classList.toggle(\"buttonSelected\");\n    synth.toggleEffect(\"reverb\")\n  });\n\n  distortionAmmt.addEventListener(\"input\", function(e) {\n    synth.setEffectsOptions({distortion: parseFloat(e.target.value)})\n  });\n\n  reverbAmmt.addEventListener(\"input\", function(e) {\n    synth.setEffectsOptions({reverb: parseFloat(e.target.value)})\n  });\n\n  effectsMix.addEventListener(\"input\", function(e) {\n    synth.setEffectsOptions({mix: parseFloat(e.target.value)})\n  })\n\n}","class EnvelopeControls {\n  constructor(synth) {\n    this.synth = synth;\n    this.mode = \"amp\"\n    this.envAttack = document.getElementById(\"envelopeAttack\");\n    this.envRelease = document.getElementById(\"envelopeRelease\");\n    this.filterButton = document.getElementById(\"envelopeFilter\");\n    this.ampButton  = document.getElementById(\"envelopeAmp\");\n    this.setupEventListeners();\n  }\n\n  setupEventListeners() {\n\n    this.envAttack.addEventListener(\"input\", function(e){\n      this.synth.setEnvelope({type: this.mode, attack: parseFloat(e.target.value)})\n    }.bind(this))\n\n    this.envRelease.addEventListener(\"input\", function(e){\n      this.synth.setEnvelope({type: this.mode, release: parseFloat(e.target.value)})\n    }.bind(this))\n\n    this.filterButton.addEventListener(\"click\", function(e) {\n      if (this.mode !== \"filter\") {\n        this.filterButton.classList.toggle(\"buttonSelected\");\n        this.ampButton.classList.toggle(\"buttonSelected\");\n      }\n      this.mode = \"filter\";\n      this.envAttack.value = this.synth.envelopes.filter.attack;\n      this.envRelease.value = this.synth.envelopes.filter.release;\n    }.bind(this));\n\n    this.ampButton.addEventListener(\"click\", function(e) {\n      if (this.mode !== \"amp\") {\n        this.filterButton.classList.toggle(\"buttonSelected\");\n        this.ampButton.classList.toggle(\"buttonSelected\");\n      }\n      this.mode = \"amp\";\n      this.envAttack.value = this.synth.envelopes.amp.attack;\n      this.envRelease.value = this.synth.envelopes.amp.release;\n\n    }.bind(this));\n  }\n}\n\nexport default EnvelopeControls;","function setupFilterControls(synth) {\n\n  const filter1Dropdown = document.getElementById(\"filter1Dropdown\");\n  filter1Dropdown.addEventListener(\"click\", function() {\n    document.getElementById(\"filter1Type\").classList.toggle(\"show\");\n  });\n\n  const filter1Type = document.getElementById(\"filter1Type\");\n    filter1Type.addEventListener(\"click\", function(e) {\n      const dropdown = document.getElementById(\"filter1Dropdown\");\n      if (e.target.id === \"filter1Lowpass\") {\n        dropdown.innerHTML = \"lowpass\";\n        synth.setFilterOptions({filter1: {type: \"lowpass\"}});\n      } else if (e.target.id === \"filter1Highpass\") {\n        dropdown.innerHTML = \"highpass\";\n        synth.setFilterOptions({filter1: {type: \"highpass\"}});\n      } else if (e.target.id === \"filter1Bandpass\") {\n        dropdown.innerHTML = \"bandpass\";\n        synth.setFilterOptions({filter1: {type: \"bandpass\"}});\n      }\n    }.bind(this));\n\n  const filter1Freq = document.getElementById(\"filter1Freq\");\n  filter1Freq.addEventListener(\"input\", function(e) {\n    synth.setFilterOptions({filter1: {frequency: e.target.value}});\n  }.bind(this));\n\n  const filter1Q = document.getElementById(\"filter1Q\");\n  filter1Q.addEventListener(\"input\", function(e){\n    synth.setFilterOptions({filter1: {Q: e.target.value}});\n  }.bind(this));\n\n  const filter1Level = document.getElementById(\"filter1Level\");\n  filter1Level.addEventListener(\"input\", function(e){\n    synth.setFilterLevels({series: e.target.value});\n  }.bind(this));\n\n\n  const filter2Dropdown = document.getElementById(\"filter2Dropdown\");\n  filter2Dropdown.addEventListener(\"click\", function() {\n    document.getElementById(\"filter2Type\").classList.toggle(\"show\");\n  });\n\n  const filter2Type = document.getElementById(\"filter2Type\");\n    filter2Type.addEventListener(\"click\", function(e) {\n      const dropdown = document.getElementById(\"filter2Dropdown\");\n      if (e.target.id === \"filter2Lowpass\") {\n        dropdown.innerHTML = \"lowpass\";\n        synth.setFilterOptions({filter2: {type: \"lowpass\"}});\n      } else if (e.target.id === \"filter2Highpass\") {\n        dropdown.innerHTML = \"highpass\";\n        synth.setFilterOptions({filter2: {type: \"highpass\"}});\n      } else if (e.target.id === \"filter2Bandpass\") {\n        dropdown.innerHTML = \"bandpass\";\n        synth.setFilterOptions({filter2: {type: \"bandpass\"}});\n      }\n    }.bind(this));\n\n  const filter2Freq = document.getElementById(\"filter2Freq\");\n  filter2Freq.addEventListener(\"input\", function(e) {\n    synth.setFilterOptions({filter2: {frequency: e.target.value}});\n  }.bind(this));\n\n  const filter2Q = document.getElementById(\"filter2Q\");\n  filter2Q.addEventListener(\"input\", function(e){\n    synth.setFilterOptions({filter2: {Q: e.target.value}});\n  }.bind(this));\n\n  const filter2Level = document.getElementById(\"filter2Level\");\n  filter2Level.addEventListener(\"input\", function(e){\n    synth.setFilterLevels({wet: e.target.value / 2});\n  }.bind(this));\n\n\n}\n\nexport default setupFilterControls;","import setupOscControls from './osc_controls';\nimport setupFilterControls from './filter_controls';\nimport EnvelopeControls from './envelope_controls';\nimport { setupEffectsControls } from './effect_controls';\nclass Keyboard {\n  constructor(synth) {\n    this.synth = synth;\n    this.playNote = this.playNote.bind(this);\n    this.setupEventListeners();\n    this.envelopeControls = new EnvelopeControls(synth);\n  }\n\n  setupEventListeners() {\n    const C = document.getElementById(\"C\")\n    C.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"C\");\n      func();\n    })\n    C.addEventListener(\"mouseup\", this.synth.stop)\n\n    const Cs = document.getElementById(\"Cs\")\n    Cs.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"Cs\");\n      func();\n    })\n    Cs.addEventListener(\"mouseup\", this.synth.stop)\n\n    const D = document.getElementById(\"D\")\n    D.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"D\");\n      func();\n    })\n    D.addEventListener(\"mouseup\", this.synth.stop)\n\n    const Ds = document.getElementById(\"Ds\")\n    Ds.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"Ds\");\n      func();\n    })\n    Ds.addEventListener(\"mouseup\", this.synth.stop)\n\n    const E = document.getElementById(\"E\")\n    E.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"E\");\n      func();\n    })\n    E.addEventListener(\"mouseup\", this.synth.stop)\n\n    const F = document.getElementById(\"F\")\n    F.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"F\");\n      func();\n    })\n    F.addEventListener(\"mouseup\", this.synth.stop)\n\n    const Fs = document.getElementById(\"Fs\")\n    Fs.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"Fs\");\n      func();\n    })\n    Fs.addEventListener(\"mouseup\", this.synth.stop)\n\n    const G = document.getElementById(\"G\")\n    G.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"G\");\n      func();\n    })\n    G.addEventListener(\"mouseup\", this.synth.stop)\n\n    const Gs = document.getElementById(\"Gs\")\n    Gs.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"Gs\");\n      func();\n    })\n    Gs.addEventListener(\"mouseup\", this.synth.stop);\n\n    const A = document.getElementById(\"A\")\n    A.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"A\");\n      func();\n    })\n    A.addEventListener(\"mouseup\", this.synth.stop)\n\n    const As = document.getElementById(\"As\")\n    As.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"As\");\n      func();\n    })\n    As.addEventListener(\"mouseup\", this.synth.stop)\n\n    const B = document.getElementById(\"B\")\n    B.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"B\");\n      func();\n    })\n    B.addEventListener(\"mouseup\", this.synth.stop);\n\n    const C2 = document.getElementById(\"C2\")\n    C2.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"C2\");\n      func();\n    })\n    C2.addEventListener(\"mouseup\", this.synth.stop)\n\n    const Cs2 = document.getElementById(\"Cs2\")\n    Cs2.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"Cs2\");\n      func();\n    })\n    Cs2.addEventListener(\"mouseup\", this.synth.stop)\n\n    const D2 = document.getElementById(\"D2\")\n    D2.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"D2\");\n      func();\n    })\n    D2.addEventListener(\"mouseup\", this.synth.stop)\n\n    const Ds2 = document.getElementById(\"Ds2\")\n    Ds2.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"Ds2\");\n      func();\n    })\n    Ds2.addEventListener(\"mouseup\", this.synth.stop)\n\n    const E2 = document.getElementById(\"E2\")\n    E2.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n      let func = this.playNote(\"E2\");\n      func();\n    })\n    E2.addEventListener(\"mouseup\", this.synth.stop)\n\n    document.addEventListener(\"keydown\", (e) => {\n      const key = e.key.toLowerCase();\n      if (key === \"a\") {\n        let func = this.playNote(\"C\")\n        func();\n      } else if (key === \"w\") {\n        let func = this.playNote(\"Cs\")\n        func();\n      } else if (key === \"s\") {\n        let func = this.playNote(\"D\")\n        func();\n      } else if (key === \"e\") {\n        let func = this.playNote(\"Ds\")\n        func();\n      } else if (key === \"d\") {\n        let func = this.playNote(\"E\")\n        func();\n      } else if (key === \"f\") {\n        let func = this.playNote(\"F\")\n        func();\n      } else if (key === \"t\") {\n        let func = this.playNote(\"Fs\")\n        func();\n      } else if (key === \"g\") {\n        let func = this.playNote(\"G\")\n        func();\n      } else if (key === \"y\") {\n        let func = this.playNote(\"Gs\")\n        func();\n      } else if (key === \"h\") {\n        let func = this.playNote(\"A\")\n        func();\n      } else if (key === \"u\") {\n        let func = this.playNote(\"As\")\n        func();\n      } else if (key === \"j\") {\n        let func = this.playNote(\"B\")\n        func();\n      } else if (key === \"k\") {\n        let func = this.playNote(\"C2\")\n        func();\n      } else if (key === \"o\") {\n        let func = this.playNote(\"Cs2\")\n        func();\n      } else if (key === \"l\") {\n        let func = this.playNote(\"D2\")\n        func();\n      } else if (key === \"p\") {\n        let func = this.playNote(\"Ds2\")\n        func();\n      } else if (key === \";\") {\n        let func = this.playNote(\"E2\")\n        func();\n      }\n    }); \n\n    document.addEventListener(\"keyup\", this.synth.stop);\n\n    const volume = document.getElementById(\"masterVolume\");\n    volume.addEventListener(\"input\", function(e) {\n      this.synth.setMasterVolume(e.target.value);\n    }.bind(this));\n\n    const octave = document.getElementById(\"synthOctave\");\n    octave.addEventListener(\"input\", function(e) {\n      this.synth.octave = (e.target.value)\n    }.bind(this));\n\n    setupOscControls(this.synth);\n    setupFilterControls(this.synth);\n    setupEffectsControls(this.synth);\n  }\n\n  playNote(note) {\n    if (note.search(\"2\") === -1) {\n      let currNote = note + this.synth.octave;\n      return(() => {\n        this.synth.playNote(currNote);\n      })\n    } else {\n\n      note = note.slice(0, note.length - 1);\n      let currNote = note + (parseInt(this.synth.octave) + 1);\n      return(() => {\n        this.synth.playNote(currNote);\n      })\n    }\n  }\n}\n\nexport default Keyboard;","function setupOscControls(synth) {\n  const osc1Dropdown = document.getElementById(\"osc1Dropdown\")\n    osc1Dropdown.addEventListener(\"click\", function() {\n      document.getElementById(\"osc1Wave\").classList.toggle(\"show\");\n    })\n\n    const osc2Dropdown = document.getElementById(\"osc2Dropdown\")\n    osc2Dropdown.addEventListener(\"click\", function() {\n      document.getElementById(\"osc2Wave\").classList.toggle(\"show\");\n    })\n\n    const osc3Dropdown = document.getElementById(\"osc3Dropdown\")\n    osc3Dropdown.addEventListener(\"click\", function() {\n      document.getElementById(\"osc3Wave\").classList.toggle(\"show\");\n    })\n\n    window.addEventListener(\"click\", function(e) {\n      const dropdowns = document.getElementsByClassName(\"dropdownContent\");\n      let openDropdown;\n      let parent;\n      for (let i = 0; i < dropdowns.length; i++) {\n        openDropdown = dropdowns[i];\n        parent = openDropdown.parentElement;\n        if (openDropdown.classList.contains('show') && parent !== e.target.parentElement) {\n          openDropdown.classList.remove('show');\n        }\n      }\n    })\n\n    const osc1Vol = document.getElementById(\"osc1Vol\");\n    osc1Vol.addEventListener(\"input\", function(e) {\n      synth.preMix({level1: e.target.value});\n    }.bind(this));\n\n    const osc2Vol = document.getElementById(\"osc2Vol\");\n    osc2Vol.addEventListener(\"input\", function(e) {\n      synth.preMix({level2: e.target.value});\n    }.bind(this));\n\n    const osc3Vol = document.getElementById(\"osc3Vol\");\n    osc3Vol.addEventListener(\"input\", function(e) {\n      synth.preMix({level3: e.target.value});\n    }.bind(this));\n\n    const osc1Interval = document.getElementById(\"osc1Interval\");\n    osc1Interval.addEventListener(\"input\", function(e) {\n      synth.setOscInterval({index: 0, semitones: e.target.value})\n    }.bind(this));\n\n    const osc2Interval = document.getElementById(\"osc2Interval\");\n    osc2Interval.addEventListener(\"input\", function(e) {\n      synth.setOscInterval({index: 1, semitones: e.target.value})\n    }.bind(this));\n\n    const osc3Interval = document.getElementById(\"osc3Interval\");\n    osc3Interval.addEventListener(\"input\", function(e) {\n      synth.setOscInterval({index: 2, semitones: e.target.value})\n    }.bind(this));\n\n    const osc1Wave = document.getElementById(\"osc1Wave\");\n    osc1Wave.addEventListener(\"click\", function(e) {\n      const dropdown = document.getElementById(\"osc1Dropdown\");\n      if (e.target.id === \"osc1Sine\") {\n        dropdown.innerHTML = \"sine\";\n        synth.setWaveform({index: 0, type: \"sine\"});\n      } else if (e.target.id === \"osc1Square\") {\n        dropdown.innerHTML = \"square\";\n        synth.setWaveform({index: 0, type: \"square\"});\n      } else if (e.target.id === \"osc1Triangle\") {\n        dropdown.innerHTML = \"triangle\";\n        synth.setWaveform({index: 0, type: \"triangle\"});\n      } else if (e.target.id === \"osc1Saw\") {\n        dropdown.innerHTML = \"sawtooth\";\n        synth.setWaveform({index: 0, type: \"sawtooth\"});\n      }\n    }.bind(this));\n\n    const osc2Wave = document.getElementById(\"osc2Wave\");\n    osc2Wave.addEventListener(\"click\", function(e) {\n      const dropdown = document.getElementById(\"osc2Dropdown\");\n      if (e.target.id === \"osc2Sine\") {\n        dropdown.innerHTML = \"sine\";\n        synth.setWaveform({index: 1, type: \"sine\"});\n      } else if (e.target.id === \"osc2Square\") {\n        dropdown.innerHTML = \"square\";\n        synth.setWaveform({index: 1, type: \"square\"});\n      } else if (e.target.id === \"osc2Triangle\") {\n        dropdown.innerHTML = \"triangle\";\n        synth.setWaveform({index: 1, type: \"triangle\"});\n      } else if (e.target.id === \"osc2Saw\") {\n        dropdown.innerHTML = \"sawtooth\";\n        synth.setWaveform({index: 1, type: \"sawtooth\"});\n      }\n    }.bind(this));\n\n    const osc3Wave = document.getElementById(\"osc3Wave\");\n    osc3Wave.addEventListener(\"click\", function(e) {\n      const dropdown = document.getElementById(\"osc3Dropdown\");\n      if (e.target.id === \"osc3Sine\") {\n        dropdown.innerHTML = \"sine\";\n        synth.setWaveform({index: 2, type: \"sine\"});\n      } else if (e.target.id === \"osc3Square\") {\n        dropdown.innerHTML = \"square\";\n        synth.setWaveform({index: 2, type: \"square\"});\n      } else if (e.target.id === \"osc3Triangle\") {\n        dropdown.innerHTML = \"triangle\";\n        synth.setWaveform({index: 2, type: \"triangle\"});\n      } else if (e.target.id === \"osc3Saw\") {\n        dropdown.innerHTML = \"sawtooth\";\n        synth.setWaveform({index: 2, type: \"sawtooth\"});\n      }\n    }.bind(this));\n}\n\nexport default setupOscControls;","// All visualization code inspired by \n// https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API\n\nfunction visualize(synth) {\n\n  const canvas = document.getElementById(\"visualizer\");\n  const ctx = canvas.getContext(\"2d\");\n\n  synth.analyzer.fftSize = 2048;\n\n  let length = synth.analyzer.frequencyBinCount;\n  let data = new Uint8Array(length);\n\n  return function draw() { \n    length = synth.analyzer.frequencyBinCount;\n    data = new Uint8Array(length);\n    \n    let visual = requestAnimationFrame(draw);\n\n    synth.analyzer.getByteTimeDomainData(data);\n\n    ctx.fillStyle = 'rgb(0,0,0)';\n    ctx.fillRect(0,0, canvas.width, canvas.height);\n\n    ctx.lineWidth = 3;\n    ctx.strokeStyle = 'rgb(50, 255, 50)';\n    ctx.beginPath();\n\n    let sliceWidth = canvas.width / length;\n    let x = 0;\n\n    for (let i = 0; i < length; i++) {\n      let v = data[i] / 128;\n      let y = v * canvas.height / 2;\n\n      if(i == 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n      x = x + sliceWidth;\n    }\n    ctx.lineTo(canvas.width, canvas.height/2);\n    ctx.stroke();\n  }\n}\n\nexport default visualize;","class LFO {\n  constructor(ctx, synth) {\n    this.lfo = ctx.createOscillator();\n    this.lfo.frequency.value = 1;\n    this.modAmmt = ctx.createGain();\n\n    this.lfo.start();\n    this.lfo.connect(this.modAmmt);\n  }\n\n  setParam(params, mode) {\n    if (mode === \"amp\") {\n      this.modAmmt.gain.value = .5;\n    } else if (mode === \"filter\") {\n      this.modAmmt.gain.value = 500;\n    } else if (mode === \"freq\") {\n      this.modAmmt.gain.value = 500;\n    } else {\n      this.modAmmt.gain = 0;\n    }\n    this.modAmmt.disconnect();\n    params.forEach( param => this.modAmmt.connect(param));\n  }\n}\n\nexport default LFO;","import Reverb from \"./reverb\";\nclass Effects {\n\n  constructor(ctx, filterBank) {\n    this.context = ctx;\n    this.input = new GainNode(ctx);\n    filterBank.connect(this.input);\n\n    this.premixer = { dry: new GainNode(ctx, {gain: 0}), wet: new GainNode(ctx, {gain: 1})};\n\n    this.input.connect(this.premixer.dry);\n    this.input.connect(this.premixer.wet);\n\n    this.toggles = {reverb: true, distortion: true};\n    this.output = new GainNode(ctx);\n\n    this.distortion = new WaveShaperNode(ctx, {curve: this.makeDistortionCurve(50), oversample: \"4x\"});\n    this.reverb = new Reverb(ctx, {roomSize: .9, dampening: 3000, wetGain: .8, dryGain: .2});\n\n    this.premixer.wet.connect(this.distortion);\n    this.distortion.connect(this.reverb.input);\n    this.reverb.connect(this.output);\n    this.premixer.dry.connect(this.output);\n\n    this.toggleReverb = this.toggleReverb.bind(this);\n    this.toggleDistortion = this.toggleDistortion.bind(this);\n  }\n\n  toggleReverb() {\n    if (this.toggles.reverb) {\n      this.reverb.disconnect();\n      if (this.toggles.distortion) {\n        this.distortion.disconnect();\n        this.distortion.connect(this.output);\n      } else {\n        this.premixer.wet.disconnect();\n        this.premixer.wet.connect(this.output);\n      }\n      this.toggles.reverb = false;\n    } else {\n      if (this.toggles.distortion) {\n        this.distortion.disconnect();\n        this.distortion.connect(this.reverb.input);\n        this.reverb.connect(this.output);\n      } else {\n        this.premixer.wet.disconnect();\n        this.premixer.wet.connect(this.reverb.input);\n        this.reverb.connect(this.output);\n      }\n      this.toggles.reverb = true;\n    }\n  }\n\n  toggleDistortion() {\n    if (this.toggles.distortion) {\n      this.distortion.disconnect();\n      if (this.toggles.reverb) {\n        this.premixer.wet.disconnect();\n        this.premixer.wet.connect(this.reverb.input);\n      } else {\n        this.premixer.wet.disconnect();\n        this.premixer.wet.connect(this.output);\n      }\n      this.toggles.distortion = false;\n    } else {\n      if (this.toggles.reverb) {\n        this.premixer.wet.disconnect();\n        this.premixer.wet.connect(this.distortion);\n        this.distortion.connect(this.reverb.input);\n      } else {\n        this.premixer.wet.disconnect();\n        this.premixer.wet.connect(this.distortion);\n        this.distortion.connect(this.output);\n      }\n      this.toggles.distortion = true;\n    }\n  }\n\n  setOptions(options) {\n    if (options.distortion !== undefined) {\n      this.distortion.curve = this.makeDistortionCurve(100 * options.distortion)\n    }\n    if (options.reverb !== undefined) {\n      let reverbAmmt = this.reverb.roomSize;\n      reverbAmmt.value = options.reverb / 1.01;\n    }\n    if (options.mix !== undefined) {\n      this.premixer.wet.gain.value = options.mix;\n      this.premixer.dry.gain.value = 1 - options.mix;\n    }\n  }\n\n  makeDistortionCurve(amount) {\n    const k = amount\n    const numSamples = 4410;\n    let curve = new Float32Array(numSamples);\n    const degree = Math.PI / 180;\n    let x;\n    for(let i = 0; i < numSamples; i++) {\n      x = i * 2 / numSamples - 1;\n      curve[i] = ( 3 + k ) * x * 20 * degree / (Math.PI + k * Math.abs(x) );\n    }\n    return curve;\n  }\n\n  connect(connection) {\n    this.output.connect(connection);\n  }\n\n}\n\nexport default Effects","class Envelopes {\n  constructor(ctx, synth, premixer, filters) {\n    this.context = ctx;\n    this.synth = synth;\n\n    this.filters = [filters.filter1.frequency, filters.filter2.frequency];\n    this.ampOut = premixer.ampOut.gain;\n\n    this.amp = {attack: .1, release: .1}\n    this.filter = {attack: .1, release: .1}\n\n    this.attack = this.attack.bind(this);\n    this.release = this.release.bind(this);\n\n    this.interval = null;\n  }\n\n  setAmpEnvelope(options) {\n    Object.keys(options).forEach( (param) => {\n      this.amp[param] = options[param];\n    });\n  }\n\n  setFilterEnvelope(options) {\n    Object.keys(options).forEach( (param) => {\n      this.filter[param] = options[param];\n    });\n  }\n\n  attack() {\n    let ampStepSize;\n    if(this.amp.attack <= 0) {\n      ampStepSize = 1;\n    } else { \n      ampStepSize = 1 / (this.amp.attack * 1000 / 10)\n    }\n\n    let filterStepSize;\n    if(this.filter.attack <= 0) {\n      filterStepSize = this.synth.endFreq1 - this.synth.startFreq1;\n    } else {\n      filterStepSize = (this.synth.endFreq1 - this.synth.startFreq1) / (this.filter.attack * 1000 / 10)\n    }\n\n    if(this.interval !== null) {\n      clearInterval(this.interval);\n      this.interval = null;\n    }\n\n    this.interval = setInterval(function() {\n      this.attackInterval(ampStepSize, filterStepSize);\n    }.bind(this), 10);\n  }\n\n  release() {\n    let ampStepSize;\n    if(this.amp.release <= 0) {\n      ampStepSize = 0 - (this.ampOut.value);\n    } else { \n      ampStepSize = 0 - (this.ampOut.value / (this.amp.release * 1000 / 10))\n    }\n\n    let filterStepSize;\n    if(this.filter.attack <= 0) {\n      filterStepSize = this.synth.startFreq1 - this.filters[0].value;\n    } else {\n      filterStepSize = (this.synth.startFreq1 - this.filters[0].value) / (this.filter.attack * 1000 / 10)\n    }\n\n    if(this.interval !== null) {\n      clearInterval(this.interval);\n      this.interval = null;\n    }\n\n    this.interval = setInterval(function() {\n      this.decayInterval(ampStepSize, filterStepSize)\n    }.bind(this), 10);\n  }\n\n  attackInterval(ampStep, filterStep) {\n    //Increment param values if needed\n    if (this.filters[0].value < this.synth.endFreq1) {\n      this.filters[0].value += filterStep;\n    }\n    if (this.filters[1].value < this.synth.endFreq2) {\n      this.filters[1].value += filterStep;\n    }\n    if (this.ampOut.value < 1) {\n      this.ampOut.value += ampStep;\n    }\n\n    // debugger;\n    //Clear the interval if the attack is complete\n    if (Math.abs(this.filters[0].value - this.synth.endFreq1) < 5 &&\n        Math.abs(this.filters[1].value - this.synth.endFreq2) < 5 &&\n        Math.abs(this.ampOut.value - 1) < .01) {\n          clearInterval(this.interval);\n          this.interval = null;\n    }\n  }\n\n  decayInterval(ampStep, filterStep) {\n    //Increment param values if needed\n    if (this.filters[0].value > this.synth.startFreq1) {\n      this.filters[0].value += filterStep;\n    }\n    if (this.filters[1].value > this.synth.startFreq2) {\n      this.filters[1].value += filterStep;\n    }\n    if (this.ampOut.value > 0) {\n      this.ampOut.value += ampStep;\n    }\n\n    // debugger;\n    //Clear the interval if the attack is complete\n    if (Math.abs(this.filters[0].value - this.synth.startFreq1) < 5 &&\n        Math.abs(this.filters[1].value - this.synth.startFreq2) < 5 &&\n        this.ampOut.value < .01) {\n          clearInterval(this.interval);\n          this.interval = null;\n    }\n\n  }\n}\n\nexport default Envelopes;","class FilterBank {\n\n  constructor(ctx) {\n    this.context = ctx;\n    \n    this.filter1 = new BiquadFilterNode(ctx, {frequency: 400});\n    this.filter2 = new BiquadFilterNode(ctx, {frequency: 400});\n    this.base1 = 400;\n    this.base = 400;\n\n    this.filterBank = [this.filter1, this.filter2]\n\n    this.wetOut = new GainNode(ctx, {gain: 0.5});\n    this.dryOut = new GainNode(ctx, {gain:0});\n    this.series = new GainNode(ctx, {gain: 0});\n    this.parallel = new GainNode(ctx, {gain: 0.5})\n\n    this.filter1.connect(this.parallel);\n    this.parallel.connect(this.wetOut)\n    this.filter2.connect(this.wetOut);\n\n    this.filter1.connect(this.series);\n    this.series.connect(this.filter2);\n  }\n\n  setFrequency(num, freq) {\n    this.filterBank[num].frequency.value = freq;\n  }\n\n  setQ(num, ammt) {\n    this.filterBank[num].Q.value = ammt;\n  }\n\n  setType(num, type){\n    this.filterBank[num].type = type;\n  }\n\n  setEnvelope(amt){\n    if (amt > 1) {\n      this.envAmt = 1;\n    } else if (amt < 0) {\n      this.envAmt = 0;\n    } else {\n      this.envAmt = amt;\n    }\n  }\n\n  setLevels(options){\n    if (options.series !== undefined) {\n      if (options.series > .5) {\n        this.series.gain.value = .5;\n      } else {\n        this.series.gain.value = options.series;\n      }\n      this.parallel.gain.value = 0.5 - this.series.gain.value;\n    }\n    if (options.wet !== undefined) {\n      if(options.wet > .5) {\n        this.wetOut.gain.value = .5;\n      } else {\n        this.wetOut.gain.value = options.wet;\n      }\n      this.dryOut.gain.value = 0.5 - this.wetOut.gain.value\n    }\n  }\n\n  connect(connection) {\n    this.wetOut.connect(connection);\n    this.dryOut.connect(connection);\n  }\n\n}\n\nexport default FilterBank;","const scaleToSemitones = {\n  C1: -45,\n  Cs1: -44,\n  D1: -43,\n  Ds1: -42,\n  E1: -41,\n  F1: -40,\n  Fs1: -39,\n  G1: -38,\n  Gs1: -37,\n  A1: -36,\n  As1: -35,\n  B1: -34,\n  C2: -33,\n  Cs2: -32,\n  D2: -31,\n  Ds2: -30,\n  E2: -29,\n  F2: -28,\n  Fs2: -27,\n  G2: -26,\n  Gs2: -25,\n  A2: -24,\n  As2: -23,\n  B2: -22,\n  C3: -21,\n  Cs3: -20,\n  D3: -19,\n  Ds3: -18,\n  E3: -17,\n  F3: -16,\n  Fs3: -15,\n  G3: -14,\n  Gs3: -13,\n  A3: -12,\n  As3: -11,\n  B3: -10,\n  C4: -9,\n  Cs4: -8,\n  D4: -7,\n  Ds4: -6,\n  E4: -5,\n  F4: -4,\n  Fs4: -3,\n  G4: -2,\n  Gs4: -1,\n  A4: 0,\n  As4: 1,\n  B4: 2,\n  C5: 3,\n  Cs5: 4,\n  D5: 5,\n  Ds5: 6,\n  E5: 7,\n  F5: 8,\n  Fs5: 9,\n  G5: 10,\n  Gs5: 11,\n  A5: 12,\n  As5: 13,\n  B5: 14,\n  C6: 15,\n  Cs6: 16,\n  D6: 17,\n  Ds6: 18,\n  E6: 19,\n  F6: 20,\n  Fs6: 21,\n  G6: 22,\n  Gs6: 23,\n  A6: 24,\n  As6: 25,\n  B6: 26,\n  C7: 27,\n  Cs7: 28,\n  D7: 29,\n  Ds7: 30,\n  E7: 31,\n  F7: 32,\n  Fs7: 33,\n  G7: 34,\n  Gs7: 35,\n  A7: 36,\n  As7: 37,\n  B7: 38,\n  C8: 39,\n  Cs8: 40\n}\n\nexport default scaleToSemitones;","class MasterMixer {\n  constructor(ctx, effects) {\n    this.context = ctx;\n    this.volume = new GainNode(ctx, {gain: .7});\n    effects.connect(this.volume);\n  }\n\n  connect(connector) {\n    this.volume.connect(connector);\n  }\n\n  setVolume(vol) {\n    this.volume.gain.value = vol;\n  }\n\n}\n\nexport default MasterMixer;","class Oscillator {\n\n  constructor(options) {\n    this.type = options.type;\n    this.state = \"stop\";\n    this.context = options.context;\n    this.interval = 0;\n    this.frequency = 440;\n    this.semitone = Math.pow(2, 1/12);\n    this.node = new OscillatorNode(this.context, {type: this.type});\n    this.volumeNode = this.context.createGain();\n    this.node.connect(this.volumeNode);\n    this.endpoint = this.volumeNode;\n    this.node.start();\n  }\n\n  setInterval(semitones) {\n    this.interval = semitones;\n    this.setFrequency(this.frequency);\n  }\n\n  setFrequency(freq) {\n    this.frequency = freq;\n    let frequency = freq * Math.pow(this.semitone, this.interval);\n    this.node.frequency.setValueAtTime(frequency, this.context.currentTime);\n  }\n\n  setWave(form) {\n    this.node.type = form;\n  }\n\n  connect(connection) {\n    this.endpoint.connect(connection);\n    this.endpoint = connection; \n  }\n\n}\n\nexport default Oscillator;","class PreMixer {\n\n  constructor(ctx, oscillators) {\n\n    this.compressor = ctx.createDynamicsCompressor();\n    this.level1 = ctx.createGain();\n    this.level2 = ctx.createGain();\n    this.level3 = ctx.createGain();\n\n    this.ampOut = new GainNode(ctx, {gain: 0});\n\n    oscillators[0].connect(this.level1);\n    oscillators[1].connect(this.level2);\n    oscillators[2].connect(this.level3);\n\n    this.level1.connect(this.compressor);\n    this.level2.connect(this.compressor);\n    this.level3.connect(this.compressor);\n\n    this.out1 = ctx.createGain({gain: 0.5});\n    this.out2 = ctx.createGain({gain: 0.5});\n    \n    this.compressor.connect(this.ampOut);\n\n    this.ampOut.connect(this.out1);\n    this.ampOut.connect(this.out2);\n  }\n\n  setLevels(options) {\n\n    if (options.level1 !== undefined) {\n      this.level1.gain.value = options.level1\n    }\n\n    if (options.level2 !== undefined) {\n      this.level2.gain.value = options.level2\n    }\n\n    if (options.level3 !== undefined) {\n      this.level3.gain.value = options.level3\n    }\n  }\n\n  setOutput(out1Level) {\n    if(out1Level > 1) {\n      this.out1.gain.value = 1;\n    } else {\n      this.out1.gain.value = out1Level;\n    }\n    this.out2Level = 1 - this.out1Level;\n  }\n\n  connect(filters) {\n    this.out1.connect(filters.filter1);\n    this.out1.connect(filters.filter2);\n    this.out2.connect(filters.dryOut);\n  }\n\n}\n\nexport default PreMixer;","// Implementation of Manfred Schoeder's Freeverb algorithmic reverb\n// inspired by this article https://itnext.io/algorithmic-reverb-and-web-audio-api-e1ccec94621a\n// Uses lowpass \"comb\" filters to simulate delay lines and allpass filters\n// to simulate diffusion through the air\n\n// First, define a composite node class to allow for multiple nodes to \n// be bundled together as one\nclass CompositeAudioNode {\n  constructor(ctx, options) {\n    this.context = ctx;\n    this.input = ctx.createGain();\n    this.output = this.context.createGain();\n  }\n\n  connect(connection) {\n    this.output.connect(connection);\n  }\n\n  disconnect() {\n    this.output.disconnect.apply(this.output, arguments);\n  }\n}\n\n// Utility function for controlling multiple audio params as if they were one\n// credit to https://gist.github.com/miselaytes-anton/7d795d6efcc7774b136c2b73dc38ed32\n\nexport function mergeParams(params){\n  const singleParam = params[0]\n  const parameter = {};\n  const audioNodeMethods = Object.getOwnPropertyNames(AudioParam.prototype)\n  .filter(prop => typeof singleParam[prop] === 'function')\n  \n  audioNodeMethods.forEach(method => {\n      parameter[method] = (...argums) => {\n          const args = Array.prototype.slice.call(argums);\n          params.forEach((param) => {\n              singleParam[method].apply(param, args);\n          })\n          \n      }\n  })\n\n  Object.defineProperties(parameter, {\n      value: {\n        get: function () {\n          return singleParam.value\n        },\n        set: function (value) {\n          params.forEach(param => {\n              param.value = value\n          })\n        }\n      }\n    })\n\n  return parameter;\n}\n\nclass LowPassComb extends CompositeAudioNode {\n  constructor(ctx, options) {\n    super(ctx, options);\n    const {delayTime, resonance: gainValue, dampening: frequency} = options;\n    this.lowPass = new BiquadFilterNode(ctx, {type: 'lowpass', frequency, Q: -3.0102999566398125});\n    this.delay = new DelayNode(ctx, { delayTime });\n    this.gain = ctx.createGain();\n    this.gain.gain.value = gainValue;\n\n    this.input.connect(this.delay)\n      .connect(this.lowPass)\n      .connect(this.gain)\n      .connect(this.input)\n      .connect(this.output);\n  }\n\n  get resonance() {\n    return this.gain.gain\n  }\n\n  get dampening() {\n    return this.delay.delayTime\n  }\n\n  get delayTime() {\n    return this.delay.delayTime;\n  }\n}\n\nclass Reverb extends CompositeAudioNode {\n  constructor(ctx, options) {\n    super(ctx, options);\n    const {roomSize: resonance, dampening, wetGain, dryGain } = options;\n    const SAMPLE_RATE = 44100;\n    const COMB_FILTER_TUNINGS = [1557, 1617, 1491, 1422, 1277, 1356, 1188, 1116]\n      .map(delayPerSecond => delayPerSecond / SAMPLE_RATE);\n    const ALLPASS_FREQUENCIES = [225, 556, 441, 341];\n\n    this.wet = ctx.createGain()\n    this.wet.gain.setValueAtTime(wetGain, ctx.currentTime)\n    this.dry = ctx.createGain()\n    this.dry.gain.setValueAtTime(dryGain, ctx.currentTime)\n    this.merger = ctx.createChannelMerger(2)\n    this.splitter = ctx.createChannelSplitter(2)\n\n    this.combFilters = COMB_FILTER_TUNINGS\n      .map(delayTime => new LowPassComb(ctx, {dampening, resonance, delayTime}));\n    const combLeft = this.combFilters.slice(0, 4);\n    const combRight = this.combFilters.slice(4);\n    this.allPassFilters = ALLPASS_FREQUENCIES\n      .map(frequency => new BiquadFilterNode(ctx, {type: 'allpass', frequency}));\n    this.input.connect(this.wet).connect(this.splitter);\n    this.input.connect(this.dry).connect(this.output);\n\n    combLeft.forEach( comb => {\n      this.splitter.connect(comb.input, 0).connect(this.merger, 0, 0)\n    });\n    combRight.forEach( comb => {\n      this.splitter.connect(comb.input, 1).connect(this.merger, 0, 1)\n    });\n\n    this.merger.connect(this.allPassFilters[0])\n      .connect(this.allPassFilters[1])\n      .connect(this.allPassFilters[2])\n      .connect(this.allPassFilters[3])\n      .connect(this.output);\n\n    this.output.gain.value = .3;\n  }\n\n  get wetGain() {\n    return this.wet.gain;\n  }\n  get dryGain() {\n    return this.dry.gain;\n  }\n  get roomSize() {\n    return mergeParams(this.combFilters.map(comb => comb.resonance));\n  }\n  get dampening() {\n    return mergeParams(this.combFilters.map(comb => comb.dampening));\n  }\n}\n\nexport default Reverb","import ScaleMap from './keyboard_scale';\nimport Oscillator from './oscillators';\nimport PreMixer from './pre_mixer';\nimport Filters from './filters';\nimport Effects from './effects';\nimport Envelopes from './envelopes';\nimport MasterMix from './master_mixer';\nimport LFO from './LFO';\nimport { mergeParams } from \"./reverb\";\n\nclass Synth {\n\n  constructor(ctx) {\n    this.state = \"pause\";\n\n    this.context = ctx;\n    this.semitone = Math.pow(2, 1/12);\n    this.octave = 3;\n\n    let osc1 = new Oscillator({type: \"sine\", context: ctx});\n    let osc2 = new Oscillator({type: \"square\", context: ctx});\n    let osc3 = new Oscillator({type: \"sawtooth\", context: ctx});\n    this.oscBank = [osc1, osc2, osc3]\n    \n    this.preMixer = new PreMixer(ctx, this.oscBank);\n    this.filters = new Filters(ctx);\n\n    // Store start and end filter frequencies for use by the envelopes\n    this.envAmt = 1\n    this.startFreq1 = 400;\n    this.endFreq1 = this.startFreq1 + (1000 * this.envAmt);\n    this.startFreq2 = 400;\n    this.endFreq2 = this.startFreq2 + (1000 * this.envAmt);\n\n    this.envelopes = new Envelopes(ctx, this, this.preMixer, this.filters);\n    this.preMixer.connect(this.filters);\n\n    this.effects = new Effects(ctx, this.filters);\n    this.analyzer = ctx.createAnalyser();\n    this.master = new MasterMix(ctx, this.effects);\n\n    this.master.connect(this.analyzer);\n    this.analyzer.connect(ctx.destination);\n\n    this.stop = this.stop.bind(this);\n\n    this.lfo = new LFO(ctx, this);\n\n    this.LFO_PARAMS = {\n      filter: [this.filters.filter1.frequency, this.filters.filter2.frequency], \n      amp: [this.master.volume.gain], \n      freq: this.oscBank.map( osc => osc.node.frequency)}\n\n    this.toggleEffect = this.toggleEffect.bind(this);\n  }\n\n  setLfo(param, mode) {\n    this.lfo.setParam(param, mode)\n  }\n\n  preMix(options) {\n    this.preMixer.setLevels(options);\n  }\n\n  setMasterVolume(vol) {\n    this.master.setVolume(vol)\n  }\n\n  setFilterOptions(options) {\n    if(options.envAmt !== undefined) {\n      this.filters.setEnvelope(options.envAmt);\n    }\n\n    if (options.filter1 !== undefined) {\n      let f1options = options.filter1;\n      if(f1options.frequency !== undefined) {\n        this.startFreq1 = parseInt(f1options.frequency);\n        this.endFreq1 = this.startFreq1 + (1000 * this.envAmt);\n        if (this.state === \"play\") {\n          this.filters.setFrequency(1, this.endFreq1);\n        } else {\n          this.filters.setFrequency(1, this.startFreq1);\n        }\n      }\n      if(f1options.Q !== undefined ) {\n        this.filters.setQ(0, f1options.Q)\n      }\n      if (f1options.type !== undefined) {\n        this.filters.setType(0, f1options.type);\n      }\n    }\n\n    if (options.filter2 !== undefined) {\n      let f2options = options.filter2;\n      if(f2options.frequency !== undefined) {\n        this.startFreq2 = parseInt(f2options.frequency);\n        this.endFreq2 = this.startFreq2 + (1000 * this.envAmt);\n        if (this.state === \"play\") {\n          this.filters.setFrequency(1, this.endFreq2);\n        } else {\n          this.filters.setFrequency(1, this.startFreq2)\n        }\n      }\n      if(f2options.Q !== undefined ) {\n        this.filters.setQ(1, f2options.Q)\n      }\n      if (f2options.type !== undefined) {\n        this.filters.setType(1, f2options.type);\n      }\n    }\n\n  }\n\n  setFilterLevels(options) {\n    this.filters.setLevels(options);\n  }\n\n  setEnvelope(options) {\n    if (options.type === \"amp\") {\n      this.envelopes.setAmpEnvelope(options);\n    } else {\n      this.envelopes.setFilterEnvelope(options);\n    }\n  }\n\n  playFreq(freq) {\n    this.state = \"play\";\n    if (this.context.state === \"suspended\") {\n      this.context.resume();\n    }\n    this.oscBank.forEach( function(oscillator) {\n      oscillator.setFrequency(freq);\n    })\n\n    this.envelopes.attack();\n  }\n\n  playNote(note) {\n    const freq = 440 * Math.pow(this.semitone, ScaleMap[note]);\n    this.playFreq(freq);\n  }\n\n  stop() {\n    this.state = \"pause\"\n    this.envelopes.release();\n  }\n\n  toggleEffect(name) {\n    if (name === \"distortion\") {\n      this.effects.toggleDistortion();\n    } else {\n      this.effects.toggleReverb();\n    }\n  }\n\n  setEffectsOptions(options) {\n    this.effects.setOptions(options);\n  }\n\n  setWaveform(options) {\n    this.oscBank[options.index].setWave(options.type);\n  }\n\n  setOscInterval(options) {\n    this.oscBank[options.index].setInterval(options.semitones);\n  }\n}\n\nexport default Synth;"],"sourceRoot":""}